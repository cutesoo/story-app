import{precacheAndRoute}from"workbox-precaching";import{registerRoute}from"workbox-routing";import{CacheableResponsePlugin}from"workbox-cacheable-response";import{NetworkFirst,CacheFirst,StaleWhileRevalidate}from"workbox-strategies";const VAPID_PUBLIC_KEY="BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk";function urlBase64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(t),o=new Uint8Array(i.length);for(let e=0;e<i.length;++e)o[e]=i.charCodeAt(e);return o}precacheAndRoute(self.__WB_MANIFEST),registerRoute((({url:e,request:t})=>"document"===t.destination||"style"===t.destination||"script"===t.destination||"image"===t.destination),new CacheFirst({cacheName:"app-static-cache",plugins:[new CacheableResponsePlugin({statuses:[0,200]})]})),registerRoute((({url:e})=>"story-api.dicoding.dev"===e.hostname),new NetworkFirst({cacheName:"story-api-cache",plugins:[new CacheableResponsePlugin({statuses:[0,200]})]})),registerRoute((({request:e,url:t})=>"story-api.dicoding.dev"===t.hostname&&"image"===e.destination),new StaleWhileRevalidate({cacheName:"story-api-images",plugins:[new CacheableResponsePlugin({statuses:[0,200]})]})),registerRoute((({url:e})=>"https://unpkg.com"===e.origin),new CacheFirst({cacheName:"unpkg-cache",plugins:[new CacheableResponsePlugin({statuses:[0,200]})]})),self.addEventListener("install",(e=>{console.log("Service Worker: Installed"),self.skipWaiting()})),self.addEventListener("activate",(e=>{console.log("Service Worker: Activated"),e.waitUntil(self.clients.claim())})),self.addEventListener("push",(e=>{console.log("Service Worker: Push Received!");const t=e.data.json(),i=t.title||"Story App Notification",o={body:t.options.body||"You have a new notification.",icon:"/favicon.png",badge:"/favicon.png"};e.waitUntil(self.registration.showNotification(i,o))})),self.addEventListener("notificationclick",(e=>{console.log("Notification clicked",e),e.notification.close(),e.waitUntil(clients.openWindow("/"))}));