import{precacheAndRoute}from"workbox-precaching";import{registerRoute}from"workbox-routing";import{CacheableResponsePlugin}from"workbox-cacheable-response";import{NetworkFirst,CacheFirst,StaleWhileRevalidate}from"workbox-strategies";import{ExpirationPlugin}from"workbox-expiration";const VAPID_PUBLIC_KEY="BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk";precacheAndRoute(self.__WB_MANIFEST),registerRoute((({url:e,request:i})=>"document"===i.destination||"style"===i.destination||"script"===i.destination||"image"===i.destination),new CacheFirst({cacheName:"app-static-cache",plugins:[new CacheableResponsePlugin({statuses:[0,200]}),new ExpirationPlugin({maxEntries:60,maxAgeSeconds:2592e3})]})),registerRoute((({url:e})=>"story-api.dicoding.dev"===e.hostname),new NetworkFirst({cacheName:"story-api-cache",plugins:[new CacheableResponsePlugin({statuses:[0,200]}),new ExpirationPlugin({maxEntries:50,maxAgeSeconds:604800})]})),registerRoute((({request:e,url:i})=>"story-api.dicoding.dev"===i.hostname&&"image"===e.destination),new StaleWhileRevalidate({cacheName:"story-api-images",plugins:[new CacheableResponsePlugin({statuses:[0,200]}),new ExpirationPlugin({maxEntries:60,maxAgeSeconds:2592e3})]})),registerRoute((({url:e})=>"https://unpkg.com"===e.origin),new CacheFirst({cacheName:"unpkg-cache",plugins:[new CacheableResponsePlugin({statuses:[0,200]}),new ExpirationPlugin({maxEntries:60,maxAgeSeconds:2592e3})]})),self.addEventListener("install",(e=>{console.log("Service Worker: Installed"),self.skipWaiting()})),self.addEventListener("activate",(e=>{console.log("Service Worker: Activated"),e.waitUntil(self.clients.claim())})),self.addEventListener("push",(e=>{console.log("Service Worker: Push Received!");const i=e.data.json(),t=i.title||"Story App Notification",n={body:i.options.body||"You have a new notification.",icon:"/story-app/favicon.png",badge:"/story-app/favicon.png"};e.waitUntil(self.registration.showNotification(t,n))})),self.addEventListener("notificationclick",(e=>{console.log("Notification clicked",e),e.notification.close(),e.waitUntil(clients.openWindow("/story-app/#/"))}));